<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newton's Nexus - ICSE Class 10 Physics</title>
    <style>
        :root {
            /* Theme: Space/Gravity (Deep Indigo, Neon Cyan, Violet) */
            --color-primary: #00E5FF; /* Neon Cyan */
            --color-secondary: #7C4DFF; /* Deep Violet */
            --color-success: #00C853;
            --color-danger: #FF1744;
            --color-warning: #FFD600;
            --color-bg: #121212; /* Dark Mode */
            --color-card: #1E1E1E;
            --color-text: #E0E0E0;
            --color-border: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(circle at center, #1a237e 0%, #000000 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--color-text);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            background: rgba(30, 30, 30, 0.9);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.2);
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--color-primary);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            color: var(--color-primary);
            font-size: 2.5em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }

        .header p {
            color: #B0BEC5;
            font-size: 1.1em;
        }

        .stats-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-card {
            flex: 1;
            min-width: 150px;
            background: var(--color-card);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            text-align: center;
            border: 1px solid var(--color-border);
        }

        .stat-card h3 {
            font-size: 0.9em;
            color: #90A4AE;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .stat-card .value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--color-primary);
        }

        .game-container {
            background: var(--color-card);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.5);
            min-height: 400px;
            border: 1px solid var(--color-border);
        }

        .menu-screen, .level-screen, .quiz-screen, .result-screen {
            display: none;
        }

        .menu-screen.active, .level-screen.active, .quiz-screen.active, .result-screen.active {
            display: block;
        }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .level-card {
            background: linear-gradient(145deg, #2c2c2c, #1f1f1f);
            border: 1px solid #333;
            color: white;
            padding: 25px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .level-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-primary);
            box-shadow: 0 0 15px rgba(0, 229, 255, 0.3);
        }

        .level-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(100%);
        }

        .level-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: var(--color-primary);
        }

        .level-card p {
            font-size: 0.95em;
            color: #aaa;
        }

        .level-card .stars {
            margin-top: 15px;
            font-size: 1.5em;
            color: var(--color-warning);
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--color-border);
        }

        .question-number {
            font-size: 1.2em;
            color: var(--color-secondary);
            font-weight: bold;
        }

        .timer {
            font-size: 1.2em;
            color: var(--color-danger);
            font-weight: bold;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: #2C2C2C;
            border: 2px solid #424242;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            color: #E0E0E0;
        }

        .option:hover {
            background: #383838;
            border-color: var(--color-primary);
            transform: translateX(5px);
        }

        .option.selected {
            background: rgba(0, 229, 255, 0.1);
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        .option.correct {
            background: rgba(0, 200, 83, 0.2);
            border-color: var(--color-success);
            color: var(--color-success);
        }

        .option.incorrect {
            background: rgba(255, 23, 68, 0.2);
            border-color: var(--color-danger);
            color: var(--color-danger);
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn {
            padding: 12px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(90deg, var(--color-secondary), var(--color-primary));
            color: black;
        }

        .btn-primary:hover {
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.4);
            transform: scale(1.02);
        }

        .btn-success {
            background: var(--color-success);
            color: black;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.05em;
            background: #333;
        }

        .feedback.correct { border-left: 5px solid var(--color-success); }
        .feedback.incorrect { border-left: 5px solid var(--color-danger); }

        .result-summary { text-align: center; padding: 30px; }
        .result-summary h2 { font-size: 2.5em; margin-bottom: 20px; color: var(--color-primary); }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .result-stat {
            background: #2C2C2C;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #444;
        }

        .badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px 5px;
            font-size: 0.9em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        .badge-gold { background: linear-gradient(45deg, #FFD700, #FFA000); color: black; }
        .badge-silver { background: linear-gradient(45deg, #E0E0E0, #9E9E9E); color: black; }
        .badge-bronze { background: linear-gradient(45deg, #CD7F32, #8D6E63); color: white; }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #333;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåå Newton's Nexus</h1>
            <p>ICSE Class 10 Physics - Chapter 1: Force</p>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <h3>Force Points</h3>
                <div class="value" id="totalScore">0</div>
            </div>
            <div class="stat-card">
                <h3>Missions</h3>
                <div class="value" id="levelsCompleted">0/5</div>
            </div>
            <div class="stat-card">
                <h3>Precision</h3>
                <div class="value" id="accuracy">0%</div>
            </div>
            <div class="stat-card">
                <h3>Medals</h3>
                <div class="value" id="badges">0</div>
            </div>
        </div>

        <div class="game-container">
            <div class="menu-screen active" id="menuScreen">
                <h2 style="text-align: center; margin-bottom: 30px; color: var(--color-primary);">Select Simulation</h2>
                <div class="level-grid" id="levelGrid"></div>
            </div>

            <div class="quiz-screen" id="quizScreen">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="question-container">
                    <div class="question-header">
                        <span class="question-number" id="questionNumber">Question 1</span>
                        <span class="timer" id="timer">‚è±Ô∏è 40s</span>
                    </div>
                    <div class="question-text" id="questionText"></div>
                    <div class="options" id="optionsContainer"></div>
                    <div class="feedback" id="feedback" style="display: none;"></div>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" id="nextBtn" style="display: none;">Next Data Point</button>
                    <button class="btn btn-success" id="finishBtn" style="display: none;">Submit Report</button>
                </div>
            </div>

            <div class="result-screen" id="resultScreen">
                <div class="result-summary">
                    <h2 id="resultTitle">Mission Complete</h2>
                    <div class="result-stats">
                        <div class="result-stat">
                            <h3>Score</h3>
                            <div class="value" id="resultScore">0</div>
                        </div>
                        <div class="result-stat">
                            <h3>Correct</h3>
                            <div class="value" id="resultCorrect">0/5</div>
                        </div>
                        <div class="result-stat">
                            <h3>Time</h3>
                            <div class="value" id="resultTime">0s</div>
                        </div>
                    </div>
                    <div id="badgeContainer"></div>
                    <div class="button-group" style="justify-content: center;">
                        <button class="btn btn-primary" id="retryBtn">Re-run Sim</button>
                        <button class="btn btn-success" id="menuBtn">Nexus Hub</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const gameData = {
            levels: [
                {
                    id: 1,
                    title: "Moment of Force",
                    description: "Torque, Pivots & Units",
                    locked: false,
                    stars: 0,
                    questions: [
                        {
                            question: "The Turning Effect of a force about a pivot is called:",
                            options: ["Pressure", "Moment of Force (Torque)", "Linear Momentum", "Impulse"],
                            correct: 1,
                            explanation: "Moment of Force (Torque) is the product of the force and the perpendicular distance from the pivot."
                        },
                        {
                            question: "Which of the following is the S.I. unit of Moment of Force?",
                            options: ["Newton (N)", "Joule (J)", "Newton-meter (Nm)", "Pascal (Pa)"],
                            correct: 2,
                            explanation: "Since Moment = Force √ó Distance, the S.I. unit is Newton √ó Meter = Nm."
                        },
                        {
                            question: "By convention, if the turning effect is Anticlockwise, the moment is taken as:",
                            options: ["Positive", "Negative", "Zero", "Neutral"],
                            correct: 0,
                            explanation: "Anticlockwise moments are conventionally Positive (+), while Clockwise moments are Negative (-)."
                        },
                        {
                            question: "To open a door easily, the handle is fixed:",
                            options: ["Near the hinges", "In the middle", "At the maximum distance from hinges", "Anywhere"],
                            correct: 2,
                            explanation: "Maximizing the distance (d) increases the Moment (œÑ = F √ó d), requiring less Force to open the door."
                        },
                        {
                            question: "A couple consists of:",
                            options: ["Two equal and opposite forces along the same line", "Two unequal forces", "Two equal and opposite parallel forces not along the same line", "A single force"],
                            correct: 2,
                            explanation: "A couple is formed by two equal, opposite, parallel forces acting along different lines of action, causing rotation."
                        }
                    ]
                },
                {
                    id: 2,
                    title: "Equilibrium",
                    description: "Conditions & Principle of Moments",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "A body is in dynamic equilibrium when:",
                            options: ["It is at rest", "It moves with constant velocity", "It moves with acceleration", "It rotates with changing speed"],
                            correct: 1,
                            explanation: "Dynamic equilibrium means the body is moving, but the net force and net moment are zero (constant velocity)."
                        },
                        {
                            question: "The Principle of Moments states that in equilibrium:",
                            options: ["Sum of anticlockwise moments = Sum of clockwise moments", "Upward forces = Downward forces", "Force = Mass √ó Acceleration", "Total energy is conserved"],
                            correct: 0,
                            explanation: "For rotational equilibrium, the algebraic sum of moments about any point is zero."
                        },
                        {
                            question: "For a body to be in complete equilibrium, the resultant force must be:",
                            options: ["Maximum", "Zero", "Equal to weight", "Infinite"],
                            correct: 1,
                            explanation: "Condition 1: Resultant of all forces = 0. Condition 2: Algebraic sum of moments = 0."
                        },
                        {
                            question: "A meter rule is pivoted at 50cm. A 10gf weight is at 10cm. Where must a 40gf weight be placed to balance it?",
                            options: ["60cm", "40cm", "90cm", "100cm"],
                            correct: 0,
                            explanation: "Moment 1: 10gf √ó (50-10) = 400. Moment 2: 40gf √ó x = 400. x = 10cm from pivot. Position = 50 + 10 = 60cm."
                        },
                        {
                            question: "In a beam balance, when the beam is horizontal, it is in:",
                            options: ["Static Equilibrium", "Dynamic Equilibrium", "Unstable Equilibrium", "Circular Motion"],
                            correct: 0,
                            explanation: "Static Equilibrium refers to a body remaining in a state of rest under the influence of several forces."
                        }
                    ]
                },
                {
                    id: 3,
                    title: "Center of Gravity",
                    description: "Stability & Locations",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "The Center of Gravity (C.G.) of a uniform ring is located:",
                            options: ["On the ring itself", "At the center of the ring (outside material)", "At the top edge", "It has no C.G."],
                            correct: 1,
                            explanation: "The C.G. can lie outside the material of the body. For a ring, it is at the geometric center."
                        },
                        {
                            question: "The C.G. of a triangular lamina (scalene triangle) is at the:",
                            options: ["Incenter", "Circumcenter", "Centroid (Intersection of medians)", "Orthocenter"],
                            correct: 2,
                            explanation: "For a uniform triangle, the C.G. is at the Centroid (intersection of medians)."
                        },
                        {
                            question: "If a body is deformed, its Center of Gravity:",
                            options: ["Remains unchanged", "Changes position", "Disappears", "Moves to the surface"],
                            correct: 1,
                            explanation: "C.G. depends on the distribution of mass. If shape changes (deformation), mass distribution changes, so C.G. shifts."
                        },
                        {
                            question: "To increase the stability of a racing car, its Center of Gravity should be:",
                            options: ["High", "Low", "At the front", "At the rear"],
                            correct: 1,
                            explanation: "Lowering the C.G. and broadening the base increases stability, preventing the car from toppling."
                        },
                        {
                            question: "A uniform meter rule balances at the 50cm mark. If a part is cut off from 0 to 10cm, the C.G. shifts towards:",
                            options: ["0 cm mark", "100 cm mark", "Stays at 50 cm", "Becomes unstable"],
                            correct: 1,
                            explanation: "Cutting mass from the left (0-10) makes the right side heavier relative to the new shape. The C.G. shifts towards the heavier side (100cm)."
                        }
                    ]
                },
                {
                    id: 4,
                    title: "Circular Motion",
                    description: "UCM, Centripetal & Centrifugal",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "In Uniform Circular Motion (UCM), which quantity remains constant?",
                            options: ["Velocity", "Displacement", "Speed", "Acceleration"],
                            correct: 2,
                            explanation: "Speed is scalar and constant. Velocity is vector and changes continuously due to change in direction."
                        },
                        {
                            question: "Is UCM an accelerated motion?",
                            options: ["No, speed is constant", "Yes, direction changes continuously", "Only if speed increases", "Impossible to say"],
                            correct: 1,
                            explanation: "Yes. Even if speed is constant, the changing direction implies a change in velocity, which is acceleration."
                        },
                        {
                            question: "The force essential for circular motion, acting towards the center, is:",
                            options: ["Centrifugal Force", "Gravitational Force only", "Centripetal Force", "Frictional Force only"],
                            correct: 2,
                            explanation: "Centripetal Force is the real force directed towards the center required to keep a body in a circular path."
                        },
                        {
                            question: "Centrifugal force is a:",
                            options: ["Real force", "Fictitious (Pseudo) force", "Nuclear force", "Magnetic force"],
                            correct: 1,
                            explanation: "Centrifugal force is a pseudo force assumed by an observer moving with the rotating body (non-inertial frame)."
                        },
                        {
                            question: "What is the work done by the Centripetal force in one complete rotation?",
                            options: ["Maximum", "Zero", "Negative", "Depends on radius"],
                            correct: 1,
                            explanation: "Work = F √ó d √ó cos(Œ∏). Since Centripetal force is perpendicular (90¬∞) to displacement, Work = 0."
                        }
                    ]
                },
                {
                    id: 5,
                    title: "Force Commander",
                    description: "Calculations & Mixed Concepts",
                    locked: true,
                    stars: 0,
                    questions: [
                        {
                            question: "A nut is opened by a wrench of length 20cm. If the least force required is 20N, find the moment of force.",
                            options: ["400 Nm", "40 Nm", "4 Nm", "0.4 Nm"],
                            correct: 2,
                            explanation: "Convert cm to m! Length = 0.2m. Moment = 20N √ó 0.2m = 4 Nm."
                        },
                        {
                            question: "Which class of lever always has a Mechanical Advantage > 1? (Wait, stick to Force!) - A couple of 5N forces are separated by 0.5m. The moment of couple is:",
                            options: ["2.5 Nm", "10 Nm", "5 Nm", "0 Nm"],
                            correct: 0,
                            explanation: "Moment of Couple = Either Force √ó Perpendicular distance between them. 5N √ó 0.5m = 2.5 Nm."
                        },
                        {
                            question: "A body weighs 50N. It is in UCM with speed 5m/s. The net force on it is:",
                            options: ["Zero", "50N", "Towards the center (mv¬≤/r)", "Tangential"],
                            correct: 2,
                            explanation: "In UCM, the net force is not zero; it is the Centripetal force acting towards the center."
                        },
                        {
                            question: "A stone tied to a string is whirled. If the string breaks, the stone flies off:",
                            options: ["Radially inward", "Radially outward", "Tangentially", "In a spiral"],
                            correct: 2,
                            explanation: "Due to inertia of direction, the stone continues in a straight line along the tangent to the circular path."
                        },
                        {
                            question: "A uniform meter scale balances at 40cm when a weight is suspended at 10cm. Where is the weight suspended?",
                            options: ["Wait, question implies finding weight ratio", "Calculated based on principle of moments", "Let's rephrase: Where is the C.G of the scale?", "50cm"],
                            correct: 3,
                            explanation: "A uniform meter scale always has its C.G. at the geometric center, which is the 50cm mark."
                        }
                    ]
                }
            ]
        };

        // Standard Game Logic (Engine)
        let currentLevel, currentQIndex, score, correctCount, timeRemaining, timerInterval;
        let totalAttempts = 0, totalCorrect = 0, startTime = 0;

        function initGame() {
            loadProgress();
            renderLevelGrid();
            updateStats();
        }

        function renderLevelGrid() {
            const grid = document.getElementById('levelGrid');
            grid.innerHTML = '';
            gameData.levels.forEach(level => {
                const card = document.createElement('div');
                card.className = `level-card ${level.locked ? 'locked' : ''}`;
                card.innerHTML = `<h3>${level.title}</h3><p>${level.description}</p><div class="stars">${'‚òÖ'.repeat(level.stars)}${'‚òÜ'.repeat(3-level.stars)}</div>`;
                if (!level.locked) card.onclick = () => startLevel(level.id);
                grid.appendChild(card);
            });
        }

        function startLevel(id) {
            currentLevel = gameData.levels.find(l => l.id === id);
            currentQIndex = 0; score = 0; correctCount = 0; startTime = Date.now();
            document.getElementById('menuScreen').classList.remove('active');
            document.getElementById('quizScreen').classList.add('active');
            showQuestion();
        }

        function showQuestion() {
            if (currentQIndex >= currentLevel.questions.length) { showResults(); return; }
            const q = currentLevel.questions[currentQIndex];
            document.getElementById('questionNumber').textContent = `Question ${currentQIndex + 1}/${currentLevel.questions.length}`;
            document.getElementById('questionText').innerHTML = q.question;
            document.getElementById('progressFill').style.width = ((currentQIndex) / currentLevel.questions.length * 100) + '%';
            
            const opts = document.getElementById('optionsContainer'); opts.innerHTML = '';
            q.options.forEach((opt, i) => {
                const d = document.createElement('div');
                d.className = 'option'; d.textContent = opt;
                d.onclick = () => selectAnswer(i);
                opts.appendChild(d);
            });

            document.getElementById('feedback').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('finishBtn').style.display = 'none';
            timeRemaining = 40; startTimer();
        }

        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeRemaining--;
                document.getElementById('timer').textContent = `‚è±Ô∏è ${timeRemaining}s`;
                if (timeRemaining <= 0) { clearInterval(timerInterval); selectAnswer(-1); }
            }, 1000);
        }

        function selectAnswer(idx) {
            clearInterval(timerInterval);
            const q = currentLevel.questions[currentQIndex];
            const opts = document.querySelectorAll('.option');
            opts.forEach((o, i) => {
                o.classList.add('disabled');
                if (i === q.correct) o.classList.add('correct');
                if (i === idx && i !== q.correct) o.classList.add('incorrect');
            });

            const fb = document.getElementById('feedback');
            fb.style.display = 'block';
            totalAttempts++;

            if (idx === q.correct) {
                correctCount++; totalCorrect++;
                const bonus = Math.floor(timeRemaining * 2);
                score += 100 + bonus;
                fb.className = 'feedback correct';
                fb.innerHTML = `<strong>‚úÖ Correct!</strong><br>${q.explanation}<br><small>+${100+bonus} Pts</small>`;
            } else {
                fb.className = 'feedback incorrect';
                fb.innerHTML = `<strong>‚ùå Analysis:</strong><br>${q.explanation}`;
            }

            if (currentQIndex < currentLevel.questions.length - 1) document.getElementById('nextBtn').style.display = 'inline-block';
            else document.getElementById('finishBtn').style.display = 'inline-block';
        }

        document.getElementById('nextBtn').onclick = () => { currentQIndex++; showQuestion(); };
        document.getElementById('finishBtn').onclick = showResults;

        function showResults() {
            const timeTaken = Math.floor((Date.now() - startTime) / 1000);
            const acc = Math.round((correctCount / currentLevel.questions.length) * 100);
            
            if (acc >= 80) currentLevel.stars = 3;
            else if (acc >= 60) currentLevel.stars = 2;
            else if (acc >= 40) currentLevel.stars = 1;

            if (currentLevel.id < gameData.levels.length && currentLevel.stars > 0) gameData.levels[currentLevel.id].locked = false;

            document.getElementById('quizScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount}/${currentLevel.questions.length}`;
            document.getElementById('resultTime').textContent = `${timeTaken}s`;

            const badges = document.getElementById('badgeContainer'); badges.innerHTML = '';
            if (currentLevel.stars === 3) badges.innerHTML += '<span class="badge badge-gold">üèÜ Physics Master</span>';
            if (timeTaken < 45) badges.innerHTML += '<span class="badge badge-silver">‚ö° Quantum Speed</span>';

            saveProgress(); updateStats();
        }

        document.getElementById('retryBtn').onclick = () => { document.getElementById('resultScreen').classList.remove('active'); startLevel(currentLevel.id); };
        document.getElementById('menuBtn').onclick = () => { document.getElementById('resultScreen').classList.remove('active'); document.getElementById('menuScreen').classList.add('active'); renderLevelGrid(); };

        function updateStats() {
            const totalStars = gameData.levels.reduce((a, b) => a + b.stars, 0);
            document.getElementById('totalScore').textContent = totalStars * 200;
            document.getElementById('levelsCompleted').textContent = `${gameData.levels.filter(l => l.stars > 0).length}/5`;
            document.getElementById('accuracy').textContent = totalAttempts ? Math.round((totalCorrect/totalAttempts)*100) + '%' : '0%';
            document.getElementById('badges').textContent = gameData.levels.filter(l => l.stars === 3).length;
        }

        function saveProgress() {
            const data = { 
                levels: gameData.levels.map(l => ({ id: l.id, locked: l.locked, stars: l.stars })),
                totalAttempts, totalCorrect
            };
            localStorage.setItem('forceQuestProgress', JSON.stringify(data));
        }

        function loadProgress() {
            const saved = JSON.parse(localStorage.getItem('forceQuestProgress'));
            if (saved) {
                saved.levels.forEach(s => {
                    const l = gameData.levels.find(x => x.id === s.id);
                    if (l) { l.locked = s.locked; l.stars = s.stars; }
                });
                totalAttempts = saved.totalAttempts || 0;
                totalCorrect = saved.totalCorrect || 0;
            }
        }

        initGame();
    </script>
</body>
</html>
