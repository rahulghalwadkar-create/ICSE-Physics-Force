<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ICSE 10 Physics – Force Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: #e5e7eb;
      margin: 0;
      padding: 0;
    }
    header {
      background: #0f172a;
      padding: 16px 24px;
      border-bottom: 2px solid #22c55e;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      font-size: 20px;
      margin: 0;
      color: #facc15;
    }
    #playerInfo {
      font-size: 14px;
    }
    main {
      max-width: 900px;
      margin: 16px auto 32px;
      padding: 16px;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    }
    .hidden {
      display: none;
    }
    #intro, #gameScreen, #summaryScreen {
      margin-top: 8px;
    }
    h2 {
      margin-top: 0;
      color: #a5b4fc;
    }
    button {
      cursor: pointer;
      border: none;
      border-radius: 999px;
      padding: 10px 20px;
      font-size: 14px;
      margin: 4px 2px;
      background: #22c55e;
      color: #0f172a;
      font-weight: bold;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.2s ease;
    }
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.4);
      background: #4ade80;
    }
    button.secondary {
      background: #38bdf8;
      color: #020617;
    }
    button.danger {
      background: #ef4444;
      color: #f9fafb;
    }

    #statusBar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      padding: 8px 12px;
      background: rgba(15,23,42,0.9);
      border-radius: 8px;
      border: 1px solid #1f2937;
      font-size: 13px;
    }
    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid #4b5563;
      margin-right: 4px;
    }
    #rankPill {
      background: rgba(22,163,74,0.15);
      border-color: #22c55e;
    }

    #questionBox {
      margin-top: 8px;
      padding: 16px;
      background: rgba(15,23,42,0.95);
      border-radius: 10px;
      border: 1px solid #374151;
    }
    #questionText {
      font-size: 16px;
      margin-bottom: 12px;
    }
    .topicTag {
      display: inline-block;
      padding: 2px 10px;
      border-radius: 999px;
      background: #111827;
      border: 1px solid #4b5563;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin-bottom: 8px;
      color: #a5b4fc;
    }
    .options {
      margin: 8px 0 4px;
    }
    .optionBtn {
      width: 100%;
      text-align: left;
      margin: 4px 0;
      border-radius: 999px;
      padding: 8px 12px;
      background: #111827;
      border: 1px solid #374151;
      color: #e5e7eb;
      font-size: 14px;
    }
    .optionBtn.correct {
      background: rgba(34,197,94,0.15);
      border-color: #22c55e;
    }
    .optionBtn.wrong {
      background: rgba(239,68,68,0.15);
      border-color: #ef4444;
    }

    #feedback {
      font-size: 14px;
      margin-top: 8px;
      min-height: 20px;
    }
    #feedback.correct {
      color: #4ade80;
    }
    #feedback.wrong {
      color: #f97316;
    }

    #badgeBar {
      margin-top: 12px;
      font-size: 13px;
    }
    .badge {
      display: inline-block;
      margin: 2px 4px 2px 0;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(59,130,246,0.15);
      border: 1px solid #60a5fa;
      font-size: 11px;
    }

    #controlBar {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      margin-top: 10px;
      gap: 8px;
    }

    #progressBarOuter {
      width: 100%;
      height: 6px;
      background: #111827;
      border-radius: 999px;
      overflow: hidden;
      margin-top: 6px;
    }
    #progressBarInner {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #a3e635);
      transition: width 0.3s ease;
    }

    #nameInput {
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      width: 220px;
      font-size: 14px;
    }
    #topicSelect {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
    }

    #summaryScreen ul {
      padding-left: 18px;
    }
  </style>
</head>
<body>
<header>
  <h1>ICSE 10 Physics – Force: Gamified Quiz</h1>
  <div id="playerInfo">
    Player: <span id="playerNameDisplay">Guest</span>
  </div>
</header>

<main>
  <!-- INTRO SCREEN -->
  <section id="intro">
    <h2>Start Chapter “Force” Game</h2>
    <p>Earn points, unlock badges and level up your rank while revising ICSE Class 10 Physics – Chapter: Force.</p>
    <p>
      <input id="nameInput" placeholder="Enter student name" />
      <button id="startBtn">Start Game</button>
    </p>
    <p style="font-size: 13px; color:#9ca3af;">
      Game topics: Basics of force & motion, moment of force, equilibrium, centre of gravity, uniform circular motion & centripetal force. [Syllabus aligned] [web:1][web:7]
    </p>
  </section>

  <!-- GAME SCREEN -->
  <section id="gameScreen" class="hidden">
    <div id="statusBar">
      <div>
        <span class="pill" id="pointsPill">Points: 0</span>
        <span class="pill" id="questionPill">Question: 1 / 10</span>
      </div>
      <div>
        <span class="pill" id="rankPill">Rank: Trainee</span>
      </div>
    </div>

    <div id="progressBarOuter">
      <div id="progressBarInner"></div>
    </div>

    <div style="margin-top:10px;">
      <label for="topicSelect" style="font-size:13px;color:#9ca3af;">Focus topic (optional): </label>
      <select id="topicSelect">
        <option value="all">All topics mixed</option>
        <option value="force_basics">Force & Motion Basics</option>
        <option value="moment_torque">Moment of Force / Torque</option>
        <option value="equilibrium">Equilibrium & Principle of Moments</option>
        <option value="cog">Centre of Gravity</option>
        <option value="ucm">Uniform Circular Motion</option>
      </select>
      <button class="secondary" id="newQuestionBtn">New Question</button>
    </div>

    <div id="questionBox">
      <div class="topicTag" id="topicTag">Topic: –</div>
      <div id="questionText">Click “New Question” to begin.</div>
      <div id="optionsContainer" class="options"></div>
      <div id="feedback"></div>

      <div id="badgeBar">
        Badges:
        <span id="badgeList"></span>
      </div>

      <div id="controlBar">
        <button id="skipBtn" class="danger">Skip</button>
        <button id="endBtn">End Game</button>
      </div>
    </div>
  </section>

  <!-- SUMMARY SCREEN -->
  <section id="summaryScreen" class="hidden">
    <h2>Game Summary</h2>
    <p id="summaryText"></p>
    <ul id="summaryBadges"></ul>
    <button id="playAgainBtn">Play Again</button>
  </section>
</main>

<script>
  // ----------- CONFIG: TOPICS (aligned with ICSE Force chapter) -----------
  const TOPICS = {
    force_basics: "Force & Motion Basics",
    moment_torque: "Moment of Force / Torque",
    equilibrium: "Equilibrium & Principle of Moments",
    cog: "Centre of Gravity",
    ucm: "Uniform Circular Motion & Centripetal Force"
  };

  // ----------- QUESTION BANK (original questions) -----------
  // You can freely add more questions here.
  const QUESTION_BANK = [
    {
      id: 1,
      topic: "force_basics",
      type: "mcq",
      text: "Which statement describes a force most correctly?",
      options: [
        "A push or pull that only changes shape of a body",
        "A physical cause that can change the state of rest or motion of a body",
        "A quantity that always produces rotation only",
        "A quantity that acts only when objects are in contact"
      ],
      correctIndex: 1,
      points: 10
    },
    {
      id: 2,
      topic: "force_basics",
      type: "mcq",
      text: "A body continues in its state of rest or uniform motion in a straight line unless acted upon by an external unbalanced force. This illustrates:",
      options: [
        "Definition of force",
        "Newton’s second law",
        "Inertia and Newton’s first law",
        "Uniform circular motion"
      ],
      correctIndex: 2,
      points: 10
    },
    {
      id: 3,
      topic: "moment_torque",
      type: "mcq",
      text: "Moment of a force about a point is defined as:",
      options: [
        "Product of force and time",
        "Product of force and perpendicular distance from the point",
        "Ratio of force and perpendicular distance",
        "Product of mass and acceleration"
      ],
      correctIndex: 1,
      points: 12
    },
    {
      id: 4,
      topic: "moment_torque",
      type: "numerical",
      text: "A force of 8 N acts at a perpendicular distance of 0.25 m from a hinge. Calculate the moment of this force about the hinge (in N m).",
      answer: 2.0,
      tolerance: 0.05,
      points: 15
    },
    {
      id: 5,
      topic: "equilibrium",
      type: "mcq",
      text: "For a uniform bar to be in equilibrium about a pivot under several forces:",
      options: [
        "Only the algebraic sum of all forces must be zero",
        "Only the algebraic sum of clockwise moments must be zero",
        "Both net force and net moment about the pivot must be zero",
        "Net force must be maximum"
      ],
      correctIndex: 2,
      points: 12
    },
    {
      id: 6,
      topic: "cog",
      type: "mcq",
      text: "The centre of gravity of a body is the point where:",
      options: [
        "The mass of the body is maximum",
        "No gravitational force acts",
        "The whole weight of the body appears to act",
        "Only horizontal forces act"
      ],
      correctIndex: 2,
      points: 10
    },
    {
      id: 7,
      topic: "cog",
      type: "mcq",
      text: "A body will be more stable when:",
      options: [
        "Its centre of gravity is high and base is small",
        "Its centre of gravity is low and base is large",
        "Its weight is very small",
        "It is placed on a smooth surface"
      ],
      correctIndex: 1,
      points: 10
    },
    {
      id: 8,
      topic: "ucm",
      type: "mcq",
      text: "In uniform circular motion of a stone tied to a string, the centripetal force is provided by:",
      options: [
        "Friction of air",
        "Weight of the stone",
        "Tension in the string",
        "No force is required"
      ],
      correctIndex: 2,
      points: 12
    },
    {
      id: 9,
      topic: "ucm",
      type: "numerical",
      text: "A body of mass 0.4 kg moves in a circle of radius 0.5 m with a speed of 3 m/s. Calculate the centripetal force (in N). Use F = mv² / r.",
      answer: (0.4 * 9) / 0.5, // 7.2 N
      tolerance: 0.1,
      points: 18
    },
    {
      id: 10,
      topic: "moment_torque",
      type: "mcq",
      text: "Clockwise and anticlockwise moments about a pivot are equal. The bar is:",
      options: [
        "In rotational equilibrium",
        "Accelerating linearly",
        "In unstable equilibrium",
        "Not affected by gravity"
      ],
      correctIndex: 0,
      points: 12
    }
  ];

  // ----------- GAME STATE -----------
  const MAX_QUESTIONS = 10;

  let playerName = "Guest";
  let totalPoints = 0;
  let questionsAsked = 0;
  let badges = [];
  let currentQuestion = null;
  let answeredCurrent = false;

  // ----------- RANK & BADGE LOGIC -----------
  function getRank(points) {
    if (points < 50) return "Trainee";
    if (points < 120) return "Junior Commander";
    if (points < 200) return "Senior Commander";
    return "Force Master";
  }

  function updateBadges() {
    const newBadges = new Set(badges);

    // Simple rules based on chapter subtopics
    if (totalPoints >= 60) newBadges.add("Torque Titan");          // strong momentum in numericals
    if (totalPoints >= 100) newBadges.add("Equilibrium Expert");
    if (totalPoints >= 140) newBadges.add("Orbit Pro");
    if (totalPoints >= 180) newBadges.add("Chapter Champion");

    badges = Array.from(newBadges);
  }

  function renderBadges() {
    const badgeList = document.getElementById("badgeList");
    badgeList.innerHTML = "";
    badges.forEach(b => {
      const span = document.createElement("span");
      span.className = "badge";
      span.textContent = b;
      badgeList.appendChild(span);
    });
  }

  // ----------- UI HELPERS -----------
  function setText(id, text) {
    document.getElementById(id).textContent = text;
  }

  function updateStatusBar() {
    setText("pointsPill", "Points: " + totalPoints);
    setText("questionPill", "Question: " + Math.min(questionsAsked + 1, MAX_QUESTIONS) + " / " + MAX_QUESTIONS);
    setText("rankPill", "Rank: " + getRank(totalPoints));

    const progress = (questionsAsked / MAX_QUESTIONS) * 100;
    document.getElementById("progressBarInner").style.width = progress + "%";
  }

  function clearFeedback() {
    const fb = document.getElementById("feedback");
    fb.textContent = "";
    fb.className = "";
  }

  // ----------- QUESTION SELECTION -----------
  function pickQuestion(topicFilter) {
    let pool = QUESTION_BANK.slice();
    if (topicFilter && topicFilter !== "all") {
      pool = pool.filter(q => q.topic === topicFilter);
    }
    if (pool.length === 0) return null;
    return pool[Math.floor(Math.random() * pool.length)];
  }

  function renderQuestion(q) {
    currentQuestion = q;
    answeredCurrent = false;

    document.getElementById("topicTag").textContent = "Topic: " + TOPICS[q.topic];
    setText("questionText", q.text);
    clearFeedback();

    const optionsContainer = document.getElementById("optionsContainer");
    optionsContainer.innerHTML = "";

    if (q.type === "mcq") {
      q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.className = "optionBtn";
        btn.textContent = String.fromCharCode(65 + idx) + ". " + opt;
        btn.addEventListener("click", () => handleMCQAnswer(idx, btn));
        optionsContainer.appendChild(btn);
      });
    } else if (q.type === "numerical") {
      const input = document.createElement("input");
      input.type = "number";
      input.step = "0.01";
      input.style.padding = "8px 10px";
      input.style.borderRadius = "999px";
      input.style.border = "1px solid #4b5563";
      input.style.background = "#020617";
      input.style.color = "#e5e7eb";
      input.style.width = "140px";
      input.placeholder = "Enter answer";

      const btn = document.createElement("button");
      btn.textContent = "Submit";
      btn.addEventListener("click", () => handleNumericalAnswer(input.value, btn));

      optionsContainer.appendChild(input);
      optionsContainer.appendChild(btn);
    }
  }

  // ----------- ANSWER HANDLERS -----------
  function handleMCQAnswer(chosenIndex, btnClicked) {
    if (answeredCurrent || !currentQuestion) return;
    answeredCurrent = true;

    const optionsButtons = document.querySelectorAll(".optionBtn");
    optionsButtons.forEach((btn, idx) => {
      if (idx === currentQuestion.correctIndex) {
        btn.classList.add("correct");
      }
      if (idx === chosenIndex && idx !== currentQuestion.correctIndex) {
        btn.classList.add("wrong");
      }
      btn.disabled = true;
    });

    const fb = document.getElementById("feedback");
    if (chosenIndex === currentQuestion.correctIndex) {
      totalPoints += currentQuestion.points;
      fb.textContent = "Correct! +" + currentQuestion.points + " points";
      fb.className = "correct";
    } else {
      fb.textContent = "Incorrect. Try to recall the concept and attempt a new question.";
      fb.className = "wrong";
    }

    updateBadges();
    renderBadges();
    questionsAsked++;
    updateStatusBar();
  }

  function handleNumericalAnswer(value, submitBtn) {
    if (answeredCurrent || !currentQuestion) return;

    const fb = document.getElementById("feedback");
    const num = parseFloat(value);
    if (isNaN(num)) {
      fb.textContent = "Please enter a valid number.";
      fb.className = "wrong";
      return;
    }

    const correct = Math.abs(num - currentQuestion.answer) <= currentQuestion.tolerance;
    answeredCurrent = true;
    submitBtn.disabled = true;

    if (correct) {
      totalPoints += currentQuestion.points;
      fb.textContent = "Correct! Approx. answer: " + currentQuestion.answer +
        " N m (or N). +" + currentQuestion.points + " points";
      fb.className = "correct";
    } else {
      fb.textContent = "Not accurate. Approx. correct answer is " + currentQuestion.answer + ". Revise the formula.";
      fb.className = "wrong";
    }

    updateBadges();
    renderBadges();
    questionsAsked++;
    updateStatusBar();
  }

  // ----------- GAME FLOW -----------
  function startGame() {
    document.getElementById("intro").classList.add("hidden");
    document.getElementById("summaryScreen").classList.add("hidden");
    document.getElementById("gameScreen").classList.remove("hidden");

    totalPoints = 0;
    questionsAsked = 0;
    badges = [];
    currentQuestion = null;
    answeredCurrent = false;
    renderBadges();
    updateStatusBar();
    clearFeedback();
    setText("questionText", "Click “New Question” to begin.");
    document.getElementById("optionsContainer").innerHTML = "";
    document.getElementById("progressBarInner").style.width = "0%";
  }

  function endGame() {
    document.getElementById("gameScreen").classList.add("hidden");
    document.getElementById("summaryScreen").classList.remove("hidden");

    const rank = getRank(totalPoints);
    const summaryText = document.getElementById("summaryText");
    summaryText.textContent =
      playerName + ", you scored " + totalPoints + " points and reached rank “" + rank +
      "” after " + questionsAsked + " questions.";

    const ul = document.getElementById("summaryBadges");
    ul.innerHTML = "";
    if (badges.length > 0) {
      const heading = document.createElement("li");
      heading.textContent = "Unlocked badges:";
      ul.appendChild(heading);
      badges.forEach(b => {
        const li = document.createElement("li");
        li.textContent = "• " + b;
        ul.appendChild(li);
      });
    } else {
      const li = document.createElement("li");
      li.textContent = "No badges unlocked yet. Play again to earn badges!";
      ul.appendChild(li);
    }
  }

  // ----------- EVENT LISTENERS -----------
  document.getElementById("startBtn").addEventListener("click", () => {
    const name = document.getElementById("nameInput").value.trim();
    playerName = name || "Guest";
    document.getElementById("playerNameDisplay").textContent = playerName;
    startGame();
  });

  document.getElementById("newQuestionBtn").addEventListener("click", () => {
    if (questionsAsked >= MAX_QUESTIONS) {
      endGame();
      return;
    }
    const topicFilter = document.getElementById("topicSelect").value;
    const q = pickQuestion(topicFilter);
    if (!q) {
      setText("questionText", "No questions available for this topic yet.");
      document.getElementById("optionsContainer").innerHTML = "";
      return;
    }
    renderQuestion(q);
  });

  document.getElementById("skipBtn").addEventListener("click", () => {
    if (!currentQuestion) return;
    if (!answeredCurrent) {
      // skipping counts as asked but no points
      questionsAsked++;
      updateStatusBar();
    }
    const topicFilter = document.getElementById("topicSelect").value;
    const q = pickQuestion(topicFilter);
    if (!q) return;
    renderQuestion(q);
  });

  document.getElementById("endBtn").addEventListener("click", () => {
    endGame();
  });

  document.getElementById("playAgainBtn").addEventListener("click", () => {
    document.getElementById("intro").classList.remove("hidden");
    document.getElementById("summaryScreen").classList.add("hidden");
  });
</script>
</body>
</html>
