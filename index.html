<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ICSE Class 10 Physics – Force Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-main: #020617;
      --bg-card: #020617;
      --bg-soft: #020617;
      --accent: #22c55e;
      --accent-soft: rgba(34,197,94,0.15);
      --accent-alt: #38bdf8;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2937;
      --danger: #ef4444;
      --danger-soft: rgba(239,68,68,0.15);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0b1120, #020617 55%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 14px 18px;
      border-bottom: 1px solid var(--border-subtle);
      background: linear-gradient(90deg, #020617, #020617);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    header h1 {
      font-size: 18px;
      margin: 0;
      color: #facc15;
      letter-spacing: 0.03em;
    }

    header small {
      display: block;
      font-size: 11px;
      color: var(--text-muted);
    }

    #playerMeta {
      font-size: 13px;
      color: var(--text-muted);
    }

    main {
      flex: 1;
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .container {
      width: 100%;
      max-width: 900px;
      background: rgba(15,23,42,0.95);
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      padding: 16px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.6);
    }

    h2 {
      margin: 0 0 6px;
      font-size: 18px;
      color: #a5b4fc;
    }

    p {
      margin: 4px 0 8px;
      font-size: 14px;
      color: var(--text-main);
    }

    #intro, #gameScreen, #summaryScreen {
      margin-top: 4px;
    }

    .hidden {
      display: none;
    }

    input[type="text"], input[type="number"], select {
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      color: var(--text-main);
      font-size: 14px;
      outline: none;
    }

    input[type="text"]:focus, input[type="number"]:focus, select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34,197,94,0.5);
    }

    button {
      cursor: pointer;
      border-radius: 999px;
      border: none;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
      margin: 4px 2px;
      background: var(--accent);
      color: #020617;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.15s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.45);
      background: #4ade80;
    }

    button.secondary {
      background: var(--accent-alt);
      color: #020617;
    }

    button.secondary:hover {
      background: #7dd3fc;
    }

    button.danger {
      background: var(--danger);
      color: #f9fafb;
    }

    button.danger:hover {
      background: #f97373;
    }

    #statusBar {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-bottom: 8px;
      padding: 8px 10px;
      background: #020617;
      border-radius: 8px;
      border: 1px solid var(--border-subtle);
      font-size: 12px;
    }

    .pill {
      padding: 3px 10px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid #4b5563;
      margin-right: 4px;
      white-space: nowrap;
    }

    #rankPill {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: #bbf7d0;
    }

    #progressBarOuter {
      width: 100%;
      height: 6px;
      background: #020617;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid #111827;
      margin-bottom: 10px;
    }

    #progressBarInner {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #a3e635);
      transition: width 0.25s ease;
    }

    #topicRow {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 6px;
      margin-bottom: 10px;
      font-size: 13px;
      color: var(--text-muted);
    }

    #questionCard {
      background: #020617;
      border-radius: 10px;
      border: 1px solid #1f2937;
      padding: 12px;
    }

    .topicTag {
      display: inline-block;
      padding: 2px 10px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      font-size: 10px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #a5b4fc;
      margin-bottom: 6px;
    }

    #questionText {
      font-size: 15px;
      margin-bottom: 8px;
    }

    .options {
      margin: 4px 0 4px;
    }

    .optionBtn {
      width: 100%;
      text-align: left;
      margin: 4px 0;
      border-radius: 999px;
      padding: 8px 12px;
      background: #020617;
      border: 1px solid #374151;
      color: var(--text-main);
      font-size: 14px;
    }

    .optionBtn.correct {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: #bbf7d0;
    }

    .optionBtn.wrong {
      background: var(--danger-soft);
      border-color: var(--danger);
      color: #fecaca;
    }

    #feedback {
      font-size: 13px;
      margin-top: 6px;
      min-height: 18px;
    }

    #feedback.correct {
      color: #4ade80;
    }

    #feedback.wrong {
      color: #f97316;
    }

    #badgeBar {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .badge {
      display: inline-block;
      margin: 2px 4px 0 0;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid #60a5fa;
      background: rgba(59,130,246,0.12);
      font-size: 11px;
      color: #bfdbfe;
    }

    #controlRow {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      gap: 6px;
      margin-top: 10px;
    }

    #summaryScreen ul {
      padding-left: 18px;
      font-size: 14px;
    }

    #summaryScreen li {
      margin-bottom: 4px;
    }

    footer {
      text-align: center;
      padding: 10px;
      font-size: 11px;
      color: var(--text-muted);
    }

    @media (max-width: 600px) {
      header h1 {
        font-size: 15px;
      }
      .container {
        padding: 12px;
      }
      #statusBar {
        font-size: 11px;
      }
    }
  </style>
</head>
<body>
<header>
  <div>
    <h1>ICSE X Physics – Force Game</h1>
    <small>Gamified MCQ + numerical quiz for Chapter: Force</small>
  </div>
  <div id="playerMeta">
    Player: <span id="playerNameDisplay">Guest</span>
  </div>
</header>

<main>
  <div class="container">
    <!-- INTRO -->
    <section id="intro">
      <h2>Start Force Chapter Challenge</h2>
      <p>Answer questions, earn points, unlock badges and level up your rank while revising ICSE Class 10 Physics Chapter: Force.</p>
      <p>
        <input id="nameInput" type="text" placeholder="Enter student name" />
        <button id="startBtn">Start Game</button>
      </p>
      <p style="font-size:12px;color:var(--text-muted);">
        Topics covered: basics of force & motion, moment of force, equilibrium & principle of moments, centre of gravity, uniform circular motion and centripetal force (as per ICSE syllabus). [web:1][web:7]
      </p>
    </section>

    <!-- GAME -->
    <section id="gameScreen" class="hidden">
      <div id="statusBar">
        <div>
          <span class="pill" id="pointsPill">Points: 0</span>
          <span class="pill" id="questionPill">Question: 1 / 10</span>
        </div>
        <div>
          <span class="pill" id="rankPill">Rank: Trainee</span>
        </div>
      </div>

      <div id="progressBarOuter">
        <div id="progressBarInner"></div>
      </div>

      <div id="topicRow">
        Focus topic:
        <select id="topicSelect">
          <option value="all">All topics mixed</option>
          <option value="force_basics">Force & Motion Basics</option>
          <option value="moment_torque">Moment of Force / Torque</option>
          <option value="equilibrium">Equilibrium & Principle of Moments</option>
          <option value="cog">Centre of Gravity</option>
          <option value="ucm">Uniform Circular Motion</option>
        </select>
        <button class="secondary" id="newQuestionBtn">New Question</button>
      </div>

      <div id="questionCard">
        <div class="topicTag" id="topicTag">Topic: –</div>
        <div id="questionText">Click “New Question” to begin the game.</div>
        <div id="optionsContainer" class="options"></div>
        <div id="feedback"></div>

        <div id="badgeBar">
          Badges: <span id="badgeList"></span>
        </div>

        <div id="controlRow">
          <button id="skipBtn" class="danger">Skip</button>
          <button id="endBtn">End Game</button>
        </div>
      </div>
    </section>

    <!-- SUMMARY -->
    <section id="summaryScreen" class="hidden">
      <h2>Game Summary</h2>
      <p id="summaryText"></p>
      <ul id="summaryBadges"></ul>
      <button id="playAgainBtn">Play Again</button>
    </section>
  </div>
</main>

<footer>
  Designed for GitHub Pages – single static HTML, CSS & JS file.
</footer>

<script>
  // ---------- TOPICS (ICSE Force chapter subtopics) ----------
  const TOPICS = {
    force_basics: "Force & Motion Basics",
    moment_torque: "Moment of Force / Torque",
    equilibrium: "Equilibrium & Principle of Moments",
    cog: "Centre of Gravity",
    ucm: "Uniform Circular Motion & Centripetal Force"
  };

  // ---------- QUESTION BANK (original questions) ----------
  const QUESTION_BANK = [
    {
      id: 1,
      topic: "force_basics",
      type: "mcq",
      text: "Which statement describes a force most accurately?",
      options: [
        "Only a push that changes shape of a body",
        "Any influence that changes the state of rest or motion of a body",
        "Only a pull that causes rotation",
        "A quantity that never changes direction of motion"
      ],
      correctIndex: 1,
      points: 10
    },
    {
      id: 2,
      topic: "force_basics",
      type: "mcq",
      text: "A ball at rest on a table begins to move only when pushed. This illustrates:",
      options: [
        "Uniform circular motion",
        "Inertia and need of an unbalanced force",
        "Conservation of momentum",
        "Centripetal force"
      ],
      correctIndex: 1,
      points: 10
    },
    {
      id: 3,
      topic: "moment_torque",
      type: "mcq",
      text: "Moment of a force about a point is defined as:",
      options: [
        "Product of force and time",
        "Product of force and perpendicular distance from the point",
        "Ratio of force and distance from the point",
        "Product of mass and acceleration"
      ],
      correctIndex: 1,
      points: 12
    },
    {
      id: 4,
      topic: "moment_torque",
      type: "numerical",
      text: "A force of 6 N acts at a perpendicular distance of 0.3 m from a pivot. Calculate the moment of this force about the pivot (in N m).",
      answer: 1.8,
      tolerance: 0.05,
      points: 15
    },
    {
      id: 5,
      topic: "equilibrium",
      type: "mcq",
      text: "For a uniform bar to be in equilibrium about a pivot under several forces:",
      options: [
        "Only the sum of all forces must be zero",
        "Only the sum of clockwise moments must be zero",
        "Both net force and net moment about the pivot must be zero",
        "Net force must be maximum"
      ],
      correctIndex: 2,
      points: 12
    },
    {
      id: 6,
      topic: "cog",
      type: "mcq",
      text: "The centre of gravity of a body is the point where:",
      options: [
        "Mass of the body is maximum",
        "The whole weight of the body appears to act",
        "No gravitational force acts",
        "Only horizontal forces act"
      ],
      correctIndex: 1,
      points: 10
    },
    {
      id: 7,
      topic: "cog",
      type: "mcq",
      text: "A body is more stable when:",
      options: [
        "Its centre of gravity is high and base is small",
        "Its centre of gravity is low and base is large",
        "Its weight is very small",
        "It is placed on a smooth surface"
      ],
      correctIndex: 1,
      points: 10
    },
    {
      id: 8,
      topic: "ucm",
      type: "mcq",
      text: "In uniform circular motion of a stone tied to a string, the centripetal force is provided by:",
      options: [
        "Friction of air",
        "Weight of the stone",
        "Tension in the string",
        "No force is required"
      ],
      correctIndex: 2,
      points: 12
    },
    {
      id: 9,
      topic: "ucm",
      type: "numerical",
      text: "A body of mass 0.5 kg moves in a circle of radius 0.4 m with a speed of 3 m/s. Calculate the centripetal force (in N). Use F = mv² / r.",
      answer: (0.5 * 9) / 0.4, // 11.25 N
      tolerance: 0.1,
      points: 18
    },
    {
      id: 10,
      topic: "moment_torque",
      type: "mcq",
      text: "If the sum of clockwise moments equals the sum of anticlockwise moments about a pivot, the bar is:",
      options: [
        "In rotational equilibrium",
        "Accelerating linearly",
        "In unstable equilibrium",
        "Not affected by gravity"
      ],
      correctIndex: 0,
      points: 12
    }
  ];

  const MAX_QUESTIONS = 10;

  let playerName = "Guest";
  let totalPoints = 0;
  let questionsAnswered = 0;
  let badges = [];
  let currentQuestion = null;
  let answeredCurrent = false;

  function getRank(points) {
    if (points < 50) return "Trainee";
    if (points < 120) return "Junior Commander";
    if (points < 200) return "Senior Commander";
    return "Force Master";
  }

  function updateBadges() {
    const set = new Set(badges);
    if (totalPoints >= 40) set.add("Force Rookie");
    if (totalPoints >= 80) set.add("Torque Titan");
    if (totalPoints >= 120) set.add("Equilibrium Expert");
    if (totalPoints >= 160) set.add("Orbit Pro");
    if (totalPoints >= 200) set.add("Chapter Champion");
    badges = Array.from(set);
  }

  function renderBadges() {
    const badgeList = document.getElementById("badgeList");
    badgeList.innerHTML = "";
    badges.forEach(b => {
      const span = document.createElement("span");
      span.className = "badge";
      span.textContent = b;
      badgeList.appendChild(span);
    });
  }

  function setText(id, text) {
    document.getElementById(id).textContent = text;
  }

  function updateStatusBar() {
    setText("pointsPill", "Points: " + totalPoints);
    setText("questionPill", "Question: " + Math.min(questionsAnswered + 1, MAX_QUESTIONS) + " / " + MAX_QUESTIONS);
    setText("rankPill", "Rank: " + getRank(totalPoints));
    const progress = (questionsAnswered / MAX_QUESTIONS) * 100;
    document.getElementById("progressBarInner").style.width = progress + "%";
  }

  function clearFeedback() {
    const fb = document.getElementById("feedback");
    fb.textContent = "";
    fb.className = "";
  }

  function pickQuestion(topicFilter) {
    let pool = QUESTION_BANK.slice();
    if (topicFilter && topicFilter !== "all") {
      pool = pool.filter(q => q.topic === topicFilter);
    }
    if (pool.length === 0) return null;
    const index = Math.floor(Math.random() * pool.length);
    return pool[index];
  }

  function renderQuestion(q) {
    currentQuestion = q;
    answeredCurrent = false;
    setText("topicTag", "Topic: " + TOPICS[q.topic]);
    setText("questionText", q.text);
    clearFeedback();
    const container = document.getElementById("optionsContainer");
    container.innerHTML = "";

    if (q.type === "mcq") {
      q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.className = "optionBtn";
        btn.textContent = String.fromCharCode(65 + idx) + ". " + opt;
        btn.addEventListener("click", () => handleMCQAnswer(idx, btn));
        container.appendChild(btn);
      });
    } else {
      const input = document.createElement("input");
      input.type = "number";
      input.step = "0.01";
      input.placeholder = "Enter answer";
      input.style.marginRight = "6px";
      const submitBtn = document.createElement("button");
      submitBtn.textContent = "Submit";
      submitBtn.addEventListener("click", () => handleNumericalAnswer(input.value, submitBtn));
      container.appendChild(input);
      container.appendChild(submitBtn);
    }
  }

  function handleMCQAnswer(choiceIndex, btnClicked) {
    if (answeredCurrent || !currentQuestion) return;
    answeredCurrent = true;
    const buttons = document.querySelectorAll(".optionBtn");
    buttons.forEach((btn, idx) => {
      if (idx === currentQuestion.correctIndex) {
        btn.classList.add("correct");
      }
      if (idx === choiceIndex && idx !== currentQuestion.correctIndex) {
        btn.classList.add("wrong");
      }
      btn.disabled = true;
    });

    const fb = document.getElementById("feedback");
    if (choiceIndex === currentQuestion.correctIndex) {
      totalPoints += currentQuestion.points;
      fb.textContent = "Correct! +" + currentQuestion.points + " points.";
      fb.className = "correct";
    } else {
      fb.textContent = "Incorrect. Revisit the concept and try another question.";
      fb.className = "wrong";
    }

    questionsAnswered++;
    updateBadges();
    renderBadges();
    updateStatusBar();
  }

  function handleNumericalAnswer(value, submitBtn) {
    if (answeredCurrent || !currentQuestion) return;
    const fb = document.getElementById("feedback");
    const num = parseFloat(value);
    if (isNaN(num)) {
      fb.textContent = "Please enter a valid number.";
      fb.className = "wrong";
      return;
    }

    answeredCurrent = true;
    submitBtn.disabled = true;
    const diff = Math.abs(num - currentQuestion.answer);
    if (diff <= currentQuestion.tolerance) {
      totalPoints += currentQuestion.points;
      fb.textContent = "Correct. Approximate value: " + currentQuestion.answer + ". +" +
        currentQuestion.points + " points.";
      fb.className = "correct";
    } else {
      fb.textContent = "Not accurate. Approximate correct answer is " +
        currentQuestion.answer + ". Revise the formula.";
      fb.className = "wrong";
    }

    questionsAnswered++;
    updateBadges();
    renderBadges();
    updateStatusBar();
  }

  function startGame() {
    document.getElementById("intro").classList.add("hidden");
    document.getElementById("summaryScreen").classList.add("hidden");
    document.getElementById("gameScreen").classList.remove("hidden");

    totalPoints = 0;
    questionsAnswered = 0;
    badges = [];
    currentQuestion = null;
    answeredCurrent = false;
    renderBadges();
    updateStatusBar();
    clearFeedback();
    setText("questionText", "Click “New Question” to begin the game.");
    document.getElementById("optionsContainer").innerHTML = "";
    document.getElementById("progressBarInner").style.width = "0%";
  }

  function endGame() {
    document.getElementById("gameScreen").classList.add("hidden");
    document.getElementById("summaryScreen").classList.remove("hidden");
    const rank = getRank(totalPoints);
    const summary = document.getElementById("summaryText");
    summary.textContent = playerName +
      ", you scored " + totalPoints + " points and reached rank \"" +
      rank + "\" after answering " + questionsAnswered + " question(s).";

    const list = document.getElementById("summaryBadges");
    list.innerHTML = "";
    if (badges.length > 0) {
      const heading = document.createElement("li");
      heading.textContent = "Unlocked badges:";
      list.appendChild(heading);
      badges.forEach(b => {
        const li = document.createElement("li");
        li.textContent = "• " + b;
        list.appendChild(li);
      });
    } else {
      const li = document.createElement("li");
      li.textContent = "No badges unlocked yet. Play again to improve!";
      list.appendChild(li);
    }
  }

  // ---------- EVENT BINDINGS ----------
  document.getElementById("startBtn").addEventListener("click", () => {
    const name = document.getElementById("nameInput").value.trim();
    playerName = name || "Guest";
    document.getElementById("playerNameDisplay").textContent = playerName;
    startGame();
  });

  document.getElementById("newQuestionBtn").addEventListener("click", () => {
    if (questionsAnswered >= MAX_QUESTIONS) {
      endGame();
      return;
    }
    const topicFilter = document.getElementById("topicSelect").value;
    const q = pickQuestion(topicFilter);
    if (!q) {
      setText("questionText", "No questions available for this topic yet.");
      document.getElementById("optionsContainer").innerHTML = "";
      return;
    }
    renderQuestion(q);
  });

  document.getElementById("skipBtn").addEventListener("click", () => {
    if (!currentQuestion) return;
    if (!answeredCurrent) {
      questionsAnswered++;
      updateStatusBar();
    }
    if (questionsAnswered >= MAX_QUESTIONS) {
      endGame();
      return;
    }
    const topicFilter = document.getElementById("topicSelect").value;
    const q = pickQuestion(topicFilter);
    if (!q) return;
    renderQuestion(q);
  });

  document.getElementById("endBtn").addEventListener("click", endGame);

  document.getElementById("playAgainBtn").addEventListener("click", () => {
    document.getElementById("intro").classList.remove("hidden");
    document.getElementById("summaryScreen").classList.add("hidden");
  });
</script>
</body>
</html>
